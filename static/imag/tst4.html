<script>
var reader1 = new FileReader();
var lastCoords = [];

reader1.addEventListener('load', e => {
  document.querySelector('#img').src = e.target.result;
  //document.getElementById("dload").href = e.target.result;
});

document.addEventListener('DOMContentLoaded', e => {
  document.forms.pickfile.file.addEventListener('change', e => {
    reader1.readAsDataURL(e.target.files[0]);
  });
});

function xy_click(event) {
    let x = event.clientX;
    let y = event.clientY;
    lastCoords.push([x,y]);
    elem = document.getElementById('img');
    let o1 = elem.getBoundingClientRect().left
    let o2 = elem.getBoundingClientRect().top;
    console.log(x + " " + y, o1, o2);
    var cs = "" + lastCoords[lastCoords.length-2] + " " +
                  lastCoords[lastCoords.length-1];
    document.getElementById("coords").innerText = cs;
}

</script>

<img onclick='xy_click(event)' id="img" />

<br/>
<br/>

<td>
  <form name="pickfile"> <input name="file" type="file" /> </form>
</td>
<td>
  <div style="float: left; margin-right: 10px" id="coords">None</div>
  <button id="crop">Crop</button>
</td>

<!-- <a download="out.jpg" id="dload" href="">Download</a> -->

